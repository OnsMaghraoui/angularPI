{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CreditDemand } from '../../class/creditdemand';\nimport { CreditDemandService } from '../../service/credit-demand.service';\nimport { FormBuilder, Validators } from '@angular/forms';\nlet CreditDemandFormComponent = class CreditDemandFormComponent {\n  constructor(creditDemandService, fb) {\n    this.creditDemandService = creditDemandService;\n    this.fb = fb;\n    this.newCreditDemand = new CreditDemand();\n    this.alerts = [];\n    this.accounts = [];\n  }\n  ngOnInit() {\n    this.creditDemandForm = this.fb.group({\n      id_acc: ['', Validators.required],\n      sum_cd: ['', Validators.required],\n      duration_cd: ['', Validators.required],\n      typecd: ['', Validators.required],\n      value_cd: ['', Validators.required]\n    });\n    // Call the API to fetch the list of accounts\n    this.creditDemandService.getAccounts().subscribe(accounts => {\n      this.accounts = accounts;\n    });\n  }\n  addCreditDemand() {\n    if (this.creditDemandForm.valid) {\n      this.newCreditDemand = this.creditDemandForm.value;\n      const id_acc = this.newCreditDemand.id_acc;\n      delete this.newCreditDemand.id_acc;\n      this.creditDemandService.addCreditDemand(this.newCreditDemand, id_acc).subscribe(res => {\n        this.alerts.push({\n          type: 'success',\n          message: 'Credit demand added successfully.'\n        });\n        this.creditDemandForm.reset();\n      }, err => {\n        this.alerts.push({\n          type: 'danger',\n          message: 'Failed to add credit demand.'\n        });\n      });\n    }\n  }\n  closeAlert(alert) {\n    const index = this.alerts.indexOf(alert);\n    this.alerts.splice(index, 1);\n  }\n};\nCreditDemandFormComponent = __decorate([Component({\n  selector: 'app-credit-demand-form',\n  templateUrl: './credit-demand-form.component.html',\n  styleUrls: ['./credit-demand-form.component.css']\n}), __metadata(\"design:paramtypes\", [CreditDemandService, FormBuilder])], CreditDemandFormComponent);\nexport { CreditDemandFormComponent };","map":null,"metadata":{},"sourceType":"module"}