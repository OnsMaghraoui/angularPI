{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { EventService } from \"../../../front/service/event.service\";\nimport * as Rellax from \"rellax\";\nimport { Event } from 'app/front/class/event';\nimport { FormBuilder, Validators } from \"@angular/forms\";\nlet EventComponent = class EventComponent {\n  constructor(eventService, router, route, formBuilder) {\n    this.eventService = eventService;\n    this.router = router;\n    this.route = route;\n    this.formBuilder = formBuilder;\n    this.isUpdate = false;\n    this.event = new Event();\n    this.alerts = [];\n    this.updateMode = false;\n  }\n  ngOnInit() {\n    var rellaxHeader = new Rellax('.rellax-header');\n    var body = document.getElementsByTagName('body')[0];\n    body.classList.add('landing-page');\n    var navbar = document.getElementsByTagName('nav')[0];\n    navbar.classList.add('navbar-transparent');\n    this.eventForm = this.formBuilder.group({\n      name_event: ['', Validators.required],\n      type_event: ['', Validators.required],\n      price_event: ['', Validators.required],\n      place_event: ['', Validators.required],\n      date_event: ['', Validators.required],\n      description_event: ['', Validators.required]\n    });\n    this.route.paramMap.subscribe(params => {\n      const id = +params.get('id'); // add a plus sign to convert the string to a number\n      if (id) {\n        this.updateMode = true;\n        this.eventService.getEvent(id).subscribe(event => {\n          this.eventForm.setValue({\n            id: event.id_event,\n            name: event.name_event,\n            type: event.type_event,\n            price: event.price_event,\n            place: event.place_event,\n            date: event.date_event,\n            description: event.description_event\n          });\n        });\n      } else {\n        this.eventForm.reset();\n        this.updateMode = false;\n      }\n    });\n    this.showEvent();\n    this.getEvent();\n  }\n  showEvent() {\n    this.eventService.retrieveAllevents().subscribe(events => {\n      this.events = events;\n    });\n  }\n  getEvent() {\n    const id = +this.route.snapshot.paramMap.get('id');\n    this.eventService.getEvent(id).subscribe(event => this.event = event);\n  }\n  updateEvent(id_event, eventData) {\n    this.eventService.updateEvent(id_event, eventData).subscribe(updatedEvent => {\n      this.event = updatedEvent;\n    });\n  }\n  onSubmit(form) {\n    if (this.isUpdate) {\n      this.eventService.updateEvent(this.id_event, this.event).subscribe(res => {\n        console.log(res);\n      }, err => console.log(err));\n    } else {\n      this.eventService.addevent(form.value).subscribe(res => {\n        console.log(res);\n      }, err => console.log(err));\n    }\n  }\n  goBack() {\n    this.router.navigate(['/events']);\n  }\n  addEvent(eventData) {\n    this.eventService.addevent(eventData).subscribe(() => {\n      console.log('Event added successfully');\n      // Reset the form fields\n      this.event = {};\n    });\n  }\n  assignEventToUser(id_event) {\n    const id_user = 2; // replace with actual user ID\n    this.eventService.assignEventToUser(id_event, id_user).subscribe(Response => {\n      console.log('Event assigned to user');\n      this.alerts.push({\n        id: 2,\n        type: 'success',\n        strong: 'Success!',\n        message: 'An email was sent to the user to inform them.',\n        icon: 'ui-2_like'\n      });\n    }, error => {\n      console.error('Error assigning event to user:', error);\n    });\n    window.location.reload();\n  }\n  deleteevent(id_event) {\n    if (confirm('Are you sure you want to delete this event?')) {\n      this.eventService.deleteevent(id_event).subscribe(Response => {\n        // Show success message\n        this.alerts.push({\n          id: 2,\n          type: 'success',\n          strong: 'Success!',\n          message: 'event deleted successfully.',\n          icon: 'ui-2_like'\n        });\n        window.location.reload();\n      });\n    } else {\n      this.alerts.push({\n        id: 3,\n        type: 'warning',\n        strong: 'Cancelled!',\n        message: 'event deletion cancelled.',\n        icon: 'ui-1_bell-53'\n      });\n    }\n  }\n  onDelete(id) {\n    if (confirm('Are you sure you want to delete this event?')) {\n      this.eventService.deleteevent(id).subscribe(() => {\n        this.events = this.events.filter(event => event.id_event !== id);\n        alert('Event deleted successfully.');\n      });\n    }\n  }\n  closeAlert(alert) {\n    setTimeout(() => {\n      const index = this.alerts.indexOf(alert);\n      if (index !== -1) {\n        this.alerts.splice(index, 1);\n      }\n    }, alert.visibleTime);\n  }\n};\nEventComponent = __decorate([Component({\n  selector: 'app-event',\n  templateUrl: './event.component.html',\n  styleUrls: ['./event.component.css']\n}), __metadata(\"design:paramtypes\", [EventService, Router, ActivatedRoute, FormBuilder])], EventComponent);\nexport { EventComponent };","map":null,"metadata":{},"sourceType":"module"}